# Repository Guidelines

## Project Structure & Module Organization
- `src/baldrick_familiar/`: Python package; CLI entrypoint is `cli.py` (installed as `familiar`).
- `script/`: helper utilities (`indexer.py`, `snapshotter.py`, `copy_by_filename.py`, `copy-mac-cli.py`).
- `create-content.sh`: orchestrates snapshot, content copy, and index build.
- `temp/`: working data generated by scripts (not for commit).
- Key config: `pyproject.toml` (project + console script), `uv.lock` (env lockfile).

## Build, Test, and Development Commands
- Prereqs: Python 3.12+, `uv` installed.
- Setup environment: `uv sync`
- Create content and build index: `sh create-content.sh`
- Build index only: `uv run python script/indexer.py`
- Run CLI without install: `uv run familiar --help`
- Install CLI locally: `uv tool install --force .`
- Query example: `familiar "List available docs" --index-path ~/.baldrick_familiar/cache/llama/default_index`

## Coding Style & Naming Conventions
- Python 3.12, 4‑space indentation, UTF‑8 files.
- Use type hints and docstrings; prefer small, pure functions.
- Naming: modules/files `snake_case.py`, functions/vars `snake_case`, classes `CapWords`.
- Logging: route through `configure_logging(...)`; keep CLI output minimal and actionable.

## Testing Guidelines
- No automated tests yet. If adding tests:
  - Framework: `pytest` (place tests in `tests/`, files `test_*.py`).
  - Run: `uv run pytest` (add `pytest` to dev deps first).
  - Aim for fast unit tests around CLI argument parsing, logging, and index helpers.

## Commit & Pull Request Guidelines
- Commits: short, imperative mood (e.g., "Add indexer flag"). Reference issues (`#123`) when applicable.
- PRs: keep focused; include description, rationale, repro steps, and sample commands/output. Update docs if CLI flags or scripts change.

## Security & Configuration Tips
- Offline‑first: ensure `ollama` is running locally; default model is `gemma3:1b` (override with `--model`).
- Index persistence lives at `~/.baldrick_familiar/cache/llama/default_index`; avoid committing cache or `temp/` artifacts.
- Do not store secrets in `temp/` or repository files.
